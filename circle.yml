machine:
  ruby:
    version: 2.3.1
dependencies:
  bundler:
    without: [development, production]
  post:
    - cp -v marc_to_solr/translation_maps/location_display.rb.tmpl marc_to_solr/translation_maps/location_display.rb
    - cp -v marc_to_solr/translation_maps/locations.rb.tmpl marc_to_solr/translation_maps/locations.rb
    - cp -v marc_to_solr/translation_maps/holding_library.rb.tmpl marc_to_solr/translation_maps/holding_library.rb
test:
  override:
    - bundle exec rspec spec:
        environment:
          RAILS_ENV: test
          FIGGY_ARK_CACHE_PATH: marc_to_solr/spec/fixtures/figgy_ark_cache
          PLUM_ARK_CACHE_PATH: marc_to_solr/spec/fixtures/plum_ark_cache
          TRAJECT_CONFIG: marc_to_solr/lib/traject_config.rb
  post:
    - bundle exec rspec marc_to_solr/spec:
        environment:
          RAILS_ENV: test
          FIGGY_ARK_CACHE_PATH: marc_to_solr/spec/fixtures/figgy_ark_cache
          PLUM_ARK_CACHE_PATH: marc_to_solr/spec/fixtures/plum_ark_cache
